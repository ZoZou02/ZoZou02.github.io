<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <div class="main">
        <div class="card">
            <div class="box" data-tilt="" data-tilt-glare data-tilt-max-glare="0.6">

                <div class="inner">
                </div>
            </div>

        </div>

        <div class="test-card">

            <div class="card-box" data-tilt="">
                <div class="img"></div>
                <div class="inner"></div>
            </div>
        </div>






    </div>

    <!-- <div id="element"></div> -->


    <!-- at the end of the body -->
    <script type="text/javascript" src="vanilla-tilt.js"></script>
    <script>
        const multiple = 20;
        const mouseOverContainer = document.getElementsByTagName("body")[0];
        const element = document.getElementById("element");

        function transformElement(x, y) {
            const box = element.getBoundingClientRect();
            const calcX = -(y - box.y - (box.height / 2)) / multiple;
            const calcY = (x - box.x - (box.width / 2)) / multiple;
            let angle = Math.floor(getMouseAngle((y - box.y - (box.height / 2)), (x - box.x - (box.width / 2))));

            element.style.transform = "rotateX(" + calcX + "deg) " + "rotateY(" + calcY + "deg)";
            element.style.setProperty("--angle", `${-angle}deg`);
            element.style.setProperty("--color", 'rgba(255,255,255,.8)');
        }

        function getMouseAngle(x, y) {
            const radians = Math.atan2(y, x);
            let angle = radians * (180 / Math.PI);

            if (angle < 0) {
                angle += 360;
            }

            return angle;
        }

        mouseOverContainer.addEventListener('mousemove', (e) => {
            window.requestAnimationFrame(function () {
                transformElement(e.clientX, e.clientY);
            });
        });

        mouseOverContainer.addEventListener('mouseleave', (e) => {
            window.requestAnimationFrame(function () {
                element.style.transform = "rotateX(0) rotateY(0)";
                element.style.setProperty("--angle", `NAN`);
                element.style.setProperty("--color", 'rgba(255,255,255,1)');
            });
        });
    </script>
</body>

<style>
    .main {
        width: 1000px;
        height: 1000px;
        background-color: black;
    }

    .card {
        display: flex;
        margin-left: auto;
        margin-right: auto;
        justify-content: center;
        width: 200px;
        height: 200px;
        overflow: hidden;
        position: relative;
    }

    .your-element {
        transform-style: preserve-3d;
        transform: perspective(1000px);
    }

    .card-box {
        display: flex;
        margin-left: auto;
        margin-right: auto;
        justify-content: center;
        width: 200px;
        height: 200px;
        /* overflow: hidden; */
        position: relative;
        transform-style: preserve-3d;
        will-change: transform;
        transform: perspective(1000px) rotateX(0deg) rotateY(0deg) scale3d(1, 1, 1);
        z-index: 1001;
        /* transform: translateZ(10px); */
    }

    .img {
        background-image: url("D:/develop/myHomePage/ZoZou02.github.io/assets/img/avatar/zozou.png");
        background-size: cover;
        height: 200px;
        width: 200px;
        transform: translateZ(-30px);
        transform-style: preserve-3d;
        /* border: 2px solid #ffffff; 
        border-radius: 5px;      */
    }

    .box {
        height: 200px;
        width: 200px;
        background-image: url("D:/develop/myHomePage/ZoZou02.github.io/assets/img/avatar/zozou.png");
        background-size: cover;
        transform-style: preserve-3d;
        will-change: transform;
        transform: perspective(1000px) rotateX(0deg) rotateY(0deg) scale3d(1, 1, 1);
    }

    .inner {
        background-image: url("D:/develop/myHomePage/ZoZou02.github.io/assets/img/avatar/framework-full-fix.png");
        background-size: cover;
        position: absolute;
        width: 100%;
        height: 100%;
        top: 50%;
        left: 50%;
        transform: translateZ(20px) translateX(-50%) translateY(-50%); 
        transform-style: preserve-3d;
        z-index: 1;
    }

    @property --angle {
        syntax: "<angle>";
        inherits: false;
        initial-value: -45deg;
    }

    @property --color {
        syntax: "<color>";
        inherits: false;
        initial-value: rgba(255, 255, 255, 1);
    }

</style>

</html>